学习笔记

## Java字节码
Java字节码是JVM使用的指令集。

#### 字节码分类：
- 栈操作指令，包括与局部变量交互的指令；
 - 程序流程控制指令；
  - 对象操作指令，包括方法调用指令；
   - 算术运算以及类型转换指令。
  
`javap`是 JDK 内置的一款工具，专门用于反编译 class 文件，获取 class 文件中的指令清单。
用法示例：`javap -c -verbose xxx类`

#### 线程栈
JVM是一台基于栈的计算工具，每个线程都有一个独属于自己的线程栈(JVM Stack)用于存储`栈帧(Frame)`。栈帧由`操作数栈`、`局部变量区`和一个`class引用`（指向当前方法在运行时常量池中对应的class）组成。

##### 操作数栈
解释执行过程中，为Java方法分配栈桢时，JVM需要开辟一块额外的空间作为操作数栈，来存放计算的操作数及返回结果。

直接作用于操作数栈的指令：
- dup指令：复制栈顶元素，常用于复制new指令创建的未经初始化的引用；
 - pop指令：常用于舍弃调用指令返回的结果；
  -（dup和pop只能作用于非long、非double类型，因long、double占据两个栈单元）
   - swap指令：交换栈顶两个元素的值。

##### 局部变量区
是Java方法栈桢另一个重要的组成部分，字节码程序可以将计算的结果缓存在这里。
JVM将局部变量区当成一个数组，依次存放：this指针（仅非静态方法）、所传入的参数、以及字节码中局部变量。

#### 方法调用指令
1. invokestatic: 	用于调用静态方法
2. invokespecial:	用于调用私有实例方法、构造器；使用super关键字调用父类实例方法、构造器；所有实现接口的默认方法；
3. invokevirtual:		用于调用非私有实例方法
4. invokeinterface:	用于调用接口方法
5. invokedynamic:	用于调用动态方法

